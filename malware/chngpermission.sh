#!/bin/bash

source /home/sample/scripts/dataset.sh

input=$1

function check_input() {
	username=$(cat /etc/trueuserowners | awk '{print $1}' | sed 's/://' | awk -v user=$input '{if ($1==user) print $1}')

	if [[ $input == "$username" ]]; then
		public_html

		root_dir
	else
		echo "Username not found"
	fi
}

function root_dir() {
	chmod 0644 /home/$username/.bash_logout

	chmod 0644 /home/$username/.bash_profile

	chmod 0644 /home/$username/.bashrc

	chmod 0600 /home/$username/.lastlogin

	chmod 0644 /home/$username/.spamassassinboxenable

	chmod 0644 /home/$username/.spamassassinenable

	chmod 0600 /home/$username/.wp-toolkit-identifier

	chmod 0771 /home/$username/.cagefs

	chmod 0755 /home/$username/.cl.selector

	chmod 0700 /home/$username/.cpanel

	chmod 0700 /home/$username/.cphorde

	chmod 0750 /home/$username/.htpasswds

	chmod 0711 /home/$username/.softaculous

	chmod 0700 /home/$username/.spamassassin

	chmod 0700 /home/$username/.trash

	chmod 0777 /home/$username/access-logs

	chmod 0777 /home/$username/www

	chmod 0750 /home/$username/etc

	chmod 0700 /home/$username/logs

	chmod 0751 /home/$username/mail

	chmod 0750 /home/$username/public_ftp

	chmod 0750 /home/$username/public_html

	chmod 0755 /home/$username/ssl

	chmod 0755 /home/$username/tmp
}

function public_html() {
	find /home/$username/public_html -type d -exec chmod 755 {} \;

	find /home/$username/public_html -type f -exec chmod 644 {} \;

	find /home/$username/public_html -type f -name "wp-config.php" -exec chmod 400 {} \;
}

check_input
